{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputDateTimePicker = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nconst daysEl = document.querySelector('[data-days]');\nconst hoursEl = document.querySelector('[data-hours]');\nconst minutesEl = document.querySelector('[data-minutes]');\nconst secondsEl = document.querySelector('[data-seconds]');\n\nlet isPastDate = selectedDate =>\n  selectedDate - Date.now() <= 0 ? true : false;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (isPastDate(selectedDates[0])) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      startBtn.disabled = true;\n    } else {\n      startBtn.disabled = false;\n      iziToast.success({\n        title: 'Success',\n        message: 'Correct date',\n        position: 'topRight',\n      });\n    }\n  },\n};\n\nconst calendar = flatpickr(inputDateTimePicker, options);\nlet timerId = null;\n\nstartBtn.classList.add('start-timer');\nstartBtn.addEventListener('click', onStartBtnClick);\n\nfunction onStartBtnClick() {\n  if (!timerId) {\n    timerId = setInterval(countDownTimeToSelectedDate, 1000);\n    startBtn.disabled = true;\n  }\n}\n\nfunction countDownTimeToSelectedDate() {\n  const now = Date.now();\n  const diff = calendar.selectedDates[0] - now;\n  const remainTime = convertMs(diff);\n\n  // startBtn.disabled = false;\n  startBtn.disabled = true;\n  inputDateTimePicker.disabled = true;\n\n  daysEl.textContent = `${addLeadingZero(remainTime.days)}`;\n  hoursEl.textContent = `${addLeadingZero(remainTime.hours)}`;\n  minutesEl.textContent = `${addLeadingZero(remainTime.minutes)}`;\n  secondsEl.textContent = `${addLeadingZero(remainTime.seconds)}`;\n\n  if (diff <= 0) {\n    stopInterval();\n    daysEl.textContent = '00';\n    hoursEl.textContent = '00';\n    minutesEl.textContent = '00';\n    secondsEl.textContent = '00';\n  }\n}\n\nfunction stopInterval() {\n  clearInterval(timerId);\n  startBtn.disabled = false;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  // console.log({ days, hours, minutes, seconds });\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  if (value < 10) {\n    value = value.toString().padStart(2, '0');\n  }\n  return value;\n}\n"],"names":["inputDateTimePicker","startBtn","daysEl","hoursEl","minutesEl","secondsEl","isPastDate","selectedDate","options","selectedDates","iziToast","calendar","flatpickr","timerId","onStartBtnClick","countDownTimeToSelectedDate","now","diff","remainTime","convertMs","addLeadingZero","stopInterval","ms","days","hours","minutes","seconds","value"],"mappings":"2GAKA,MAAMA,EAAsB,SAAS,cAAc,kBAAkB,EAC/DC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAEzD,IAAIC,EAAaC,GACfA,EAAe,KAAK,IAAG,GAAM,EAE/B,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBH,EAAWG,EAAc,CAAC,CAAC,GAC7BC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,UAClB,CAAO,EACDT,EAAS,SAAW,KAEpBA,EAAS,SAAW,GACpBS,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,eACT,SAAU,UAClB,CAAO,EAEJ,CACH,EAEMC,EAAWC,EAAUZ,EAAqBQ,CAAO,EACvD,IAAIK,EAAU,KAEdZ,EAAS,UAAU,IAAI,aAAa,EACpCA,EAAS,iBAAiB,QAASa,CAAe,EAElD,SAASA,GAAkB,CACpBD,IACHA,EAAU,YAAYE,EAA6B,GAAI,EACvDd,EAAS,SAAW,GAExB,CAEA,SAASc,GAA8B,CACrC,MAAMC,EAAM,KAAK,MACXC,EAAON,EAAS,cAAc,CAAC,EAAIK,EACnCE,EAAaC,EAAUF,CAAI,EAGjChB,EAAS,SAAW,GACpBD,EAAoB,SAAW,GAE/BE,EAAO,YAAc,GAAGkB,EAAeF,EAAW,IAAI,CAAC,GACvDf,EAAQ,YAAc,GAAGiB,EAAeF,EAAW,KAAK,CAAC,GACzDd,EAAU,YAAc,GAAGgB,EAAeF,EAAW,OAAO,CAAC,GAC7Db,EAAU,YAAc,GAAGe,EAAeF,EAAW,OAAO,CAAC,GAEzDD,GAAQ,IACVI,IACAnB,EAAO,YAAc,KACrBC,EAAQ,YAAc,KACtBC,EAAU,YAAc,KACxBC,EAAU,YAAc,KAE5B,CAEA,SAASgB,GAAe,CACtB,cAAcR,CAAO,EACrBZ,EAAS,SAAW,EACtB,CAEA,SAASkB,EAAUG,EAAI,CAOrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASN,EAAeO,EAAO,CAC7B,OAAIA,EAAQ,KACVA,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,GAEnCA,CACT"}